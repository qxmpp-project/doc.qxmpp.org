<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>QXmpp: Using QXmpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">QXmpp
   &#160;<span id="projectnumber">Version:0.9.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Using QXmpp </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Example: example_0_connected</h2>
<p>This example just connects to the xmpp server. And starts receiving presences (updates) from the server. After running this example, you can see this user online, if it's added in your roster (friends list). Logging type has been set to stdout. You can see the progress on the command line. This example is also available with the source code in the example directory.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;QtCore/QCoreApplication&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;QXmppClient.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;QXmppLogger.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// create a Qt application</span></div>
<div class="line">    QCoreApplication a(argc, argv);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// setting the logging type to stdout</span></div>
<div class="line">    <a class="code" href="classQXmppLogger.html#ac261f30eeb3caaec02e9a97f9529ac49">QXmppLogger::getLogger</a>()-&gt;<a class="code" href="classQXmppLogger.html#a0b60be94fa2f768d3eabcdba8357f15b">setLoggingType</a>(<a class="code" href="group__Core.html#gga9a52fe426322ef8e10e05b7092be6c20acd51c8c54ebb5284752f224c69709998">QXmppLogger::StdoutLogging</a>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// creating the object of the client class QXmppClient</span></div>
<div class="line">    <span class="comment">// and then calling the connectToServer function to connect to gtalk server</span></div>
<div class="line">    <a class="code" href="classQXmppClient.html">QXmppClient</a> client;</div>
<div class="line">    client.<a class="code" href="classQXmppClient.html#afebe3b0955b81c6dd0e738db328cf06b">connectToServer</a>(<span class="stringliteral">&quot;qxmpp.test1@gmail.com&quot;</span>, <span class="stringliteral">&quot;qxmpp123&quot;</span>);</div>
<div class="line"></div>
<div class="line">    <span class="comment">// run the application main loop</span></div>
<div class="line">    <span class="keywordflow">return</span> a.exec();</div>
<div class="line">}</div>
</div><!-- fragment --><h2>Example: example_1_echoClient</h2>
<p>This is a very simple bot which echoes the message sent to it. Run this example, send it a message from a friend of this bot. You will receive the message back. This example shows how to receive and send messages. This example is also available with the source code in the example directory.</p>
<div class="fragment"><div class="line"><span class="comment">// subclass the QXmppClient and create a new class echoClient</span></div>
<div class="line"><span class="comment">// in the contructor the signal QXmppClient::messageReceived(const QXmppMessage&amp;)</span></div>
<div class="line"><span class="comment">// is connected to the slot echoClient::messageReceived(const QXmppMessage&amp;)</span></div>
<div class="line"><span class="comment">// in the slot one can process the message received</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;QXmppClient.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">class </span>echoClient : <span class="keyword">public</span> <a class="code" href="classQXmppClient.html">QXmppClient</a></div>
<div class="line">{</div>
<div class="line">    Q_OBJECT</div>
<div class="line"></div>
<div class="line"><span class="keyword">public</span>:</div>
<div class="line">    echoClient(QObject *parent = 0);</div>
<div class="line">    ~echoClient();</div>
<div class="line"></div>
<div class="line"><span class="keyword">public</span> slots:</div>
<div class="line">    <span class="keywordtype">void</span> <a class="code" href="classQXmppClient.html#aa3023a1ba0628cff1032f86df93d7bc3">messageReceived</a>(<span class="keyword">const</span> <a class="code" href="classQXmppMessage.html">QXmppMessage</a>&amp;);</div>
<div class="line">};</div>
<div class="line">}}}</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="preprocessor">#include &quot;echoClient.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;QXmppMessage.h&quot;</span></div>
<div class="line"></div>
<div class="line">echoClient::echoClient(QObject *parent)</div>
<div class="line">    : <a class="code" href="classQXmppClient.html">QXmppClient</a>(parent)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordtype">bool</span> check = connect(<span class="keyword">this</span>, SIGNAL(messageReceived(<span class="keyword">const</span> <a class="code" href="classQXmppMessage.html">QXmppMessage</a>&amp;)),</div>
<div class="line">        SLOT(messageReceived(<span class="keyword">const</span> <a class="code" href="classQXmppMessage.html">QXmppMessage</a>&amp;)));</div>
<div class="line">    Q_ASSERT(check);</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">echoClient::~echoClient()</div>
<div class="line">{</div>
<div class="line"></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="comment">// slot where message sent to this client is received</span></div>
<div class="line"><span class="comment">// here getFrom() gives the sender and getBody() gives the message</span></div>
<div class="line"><span class="comment">// using the function sendPacket message is sent back to the sender</span></div>
<div class="line"><span class="keywordtype">void</span> echoClient::messageReceived(<span class="keyword">const</span> <a class="code" href="classQXmppMessage.html">QXmppMessage</a>&amp; message)</div>
<div class="line">{</div>
<div class="line">    QString from = message.getFrom();</div>
<div class="line">    QString msg = message.getBody();</div>
<div class="line"></div>
<div class="line">    sendPacket(<a class="code" href="classQXmppMessage.html">QXmppMessage</a>(<span class="stringliteral">&quot;&quot;</span>, from, <span class="stringliteral">&quot;Your message: &quot;</span> + msg));</div>
<div class="line">}</div>
<div class="line">}}}</div>
</div><!-- fragment --><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;QtCore/QCoreApplication&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;echoClient.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;QXmppLogger.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line">{</div>
<div class="line">    QCoreApplication a(argc, argv);</div>
<div class="line"></div>
<div class="line">    <a class="code" href="classQXmppLogger.html#ac261f30eeb3caaec02e9a97f9529ac49">QXmppLogger::getLogger</a>()-&gt;<a class="code" href="classQXmppLogger.html#a0b60be94fa2f768d3eabcdba8357f15b">setLoggingType</a>(<a class="code" href="group__Core.html#gga9a52fe426322ef8e10e05b7092be6c20acd51c8c54ebb5284752f224c69709998">QXmppLogger::StdoutLogging</a>);</div>
<div class="line"></div>
<div class="line">    echoClient client;</div>
<div class="line">    client.connectToServer(<span class="stringliteral">&quot;qxmpp.test1@gmail.com&quot;</span>, <span class="stringliteral">&quot;qxmpp123&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> a.exec();</div>
<div class="line">}</div>
</div><!-- fragment --> </div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
